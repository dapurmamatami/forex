<div class="account_ctn">
    <span class="account_ctn__step">只需一步，即刻开始</span>
    <h4 class="account_ctn__title">
        注册账户
    </h4>

    <div ng-show="step === 1">
        <form name="registerForm" novalidate>
            <div class="row form_row">
                <div class="col-xs-2 text-right">
                    <label>昵称</label>
                </div>
                <div class="col-xs-5">
                    <input class="form-control" 
                           name="username" 
                           type="text"
                           required
                           ng-model="account.username"
                           tw-txt-valid
                           prop-name="'username'"
                           min-len="4"
                           max-len="20"
                           ng-blur="showErr('username')"
                           ng-focus="hideErr('username')">
                </div>
                <div class="col-xs-4">
                    <div ng-show="formErr.username.show">
                        <p class="form_row__right_alert" ng-show="registerForm.username.$error.required">
                            请输入昵称
                        </p>
                         <p class="form_row__right_alert" ng-show="registerForm.username.$error.twTxtValid">
                            {{formErr.username.tip}}
                        </p>
                    </div>
                    <div ng-show="backErr.username.show">
                        <p class="form_row__right_alert" ng-show="backErr.username.status === 1">
                            昵称已存在
                        </p>
                        <p class="form_row__right_alert" ng-show="backErr.username.status === 2">
                            昵称包含敏感词汇，请修改
                        </p>
                    </div>
                </div>
            </div>

            <div class="row form_row">
                <div class="col-xs-2 text-right">
                    <label>手机号码</label>
                </div>
                
                <div class="col-xs-5">
                    <input class="form-control" 
                           name="phone"
                           type="text"
                           required
                           ng-model="account.phone"
                           ng-pattern="formErr.phone.reg"
                           ng-focus="hideErr('phone')"
                           ng-blur="showErr('phone')">
                </div>
                <div class="col-xs-4">
                    <div ng-show="formErr.phone.show">
                        <p class="form_row__right_alert" ng-show="registerForm.phone.$error.required">
                            请输入手机号码
                        </p>
                        <p class="form_row__right_alert" ng-show="registerForm.phone.$error.pattern">
                            输入手机号码格式不正确
                        </p>
                    </div>
                    <div ng-show="backErr.phone.show">
                        <p class="form_row__right_alert" ng-show="backErr.phone.status === 1">
                            该手机号码已注册
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="row form_row">
                <div class="col-xs-2 text-right">
                    <label>验证码</label>
                </div>

                <div class="col-xs-3">
                    <input class="form-control" 
                           name="verifyCode"
                           type="text"
                           required
                           ng-model="account.verifyCode"
                           ng-blur="showErr('verifyCode')"
                           ng-focus="hideErr('verifyCode')">
                </div>

                <div class="col-xs-2">
                    <span class="verify_timer_btn" tw-verify-timer start-timer="startTimer" ng-click="getVerifyCode()">
                    </span>
                </div>

                <div class="col-xs-4">
                    <div ng-show="formErr.verifyCode.show">
                        <p class="form_row__right_alert" ng-show="registerForm.verifyCode.$error.required">
                            请输入验证码
                        </p>
                    </div>
                    <div ng-show="backErr.verifyCode.show">
                        <p class="form_row__right_alert" ng-show="backErr.verifyCode.status !== 0">
                           验证码不正确 
                        </p>
                    </div>
                </div>
            </div>

            <div class="row form_row">
                <div class="col-xs-2 text-right">
                    <label>电子邮箱</label>
                </div>

                <div class="col-xs-5">
                    <input class="form-control" 
                           name="email" 
                           type="text"
                           required
                           ng-model="account.email"
                           ng-pattern="formErr.email.reg"
                           ng-focus="hideErr('email')"
                           ng-blur="showErr('email')">
                </div>

                <div class="col-xs-4">
                    <div ng-show="formErr.email.show">
                        <p class="form_row__right_alert" ng-show="registerForm.email.$error.required">
                            请输入电子邮箱
                        </p>
                        <p class="form_row__right_alert" ng-show="registerForm.email.$error.pattern">
                            输入的电子邮箱格式不正确
                        </p>
                    </div>
                    <div ng-show="backErr.email.show">
                        <p class="form_row__right_alert" ng-show="backErr.email.status === 1">
                            该电子邮箱已注册
                        </p>
                    </div>
                </div>
            </div>

            <div class="row form_row">
                <div class="col-xs-2 text-right">
                    <label>密码</label>
                </div>

                <div class="col-xs-5">
                    <input class="form-control" 
                           name="password" 
                           type="password"
                           required
                           ng-model="account.password"
                           tw-pwd-valid
                           ng-focus="hideErr('password')"
                           ng-blur="showErr('password')">
                </div>

                <div class="col-xs-4">
                    <div ng-show="formErr.password.show">
                        <p class="form_row__right_alert" ng-show="registerForm.password.$error.required">
                            请输入密码
                        </p>
                        <p class="form_row__right_alert" ng-show="registerForm.password.$error.twPwdValid">
                            {{formErr.password.tip}}                           
                        </p>
                    </div>
                </div>
            </div>

            <div class="row form_row">
                <div class="col-xs-2 text-right">
                    <label>确认密码</label>
                </div>
                
                <div class="col-xs-5">
                    <input class="form-control" 
                           name="confirmPwd" 
                           type="password"
                           required
                           ng-model="account.confirmPwd"
                           tw-confirm-pwd
                           password="account.password"
                           ng-focus="hideErr('confirmPwd')"
                           ng-blur="showErr('confirmPwd')">
                </div>

                <div class="col-xs-4">
                    <div ng-show="formErr.confirmPwd.show">
                        <p class="form_row__right_alert" ng-show="registerForm.confirmPwd.$error.required">
                            请再次输入密码
                        </p>
                        <p class="form_row__right_alert" ng-show="registerForm.confirmPwd.$error.twConfirmPwd">
                            输入的密码不正确
                        </p>
                    </div>
                </div>
            </div>

            <div class="row form_row">
                <div class="col-xs-2 text-right">
                    <label>邀请码</label>
                </div>
                <div class="col-xs-5">
                    <input class="form-control" 
                           name="forkCode"
                           type="text"
                           placeholder="邀请码（可不填）"
                           ng-model="account.forkCode">
                </div>
            </div>

            <div class="row form_row">
                <div class="col-xs-5 col-xs-offset-2">
                    <div class="checkbox">
                        <label>
                            <input name="agreement"
                                   type="checkbox"
                                   checked
                                   required
                                   ng-model="account.agreement">
                            同意并遵守 
                            <a href="https://www.tigerwit.com/blog/support/risk" target="_blank">
                                风险披露
                            </a>
                            和 
                            <a href="https://www.tigerwit.com/blog/support/notice" target="_blank">
                                用户交易须知
                            </a>
                        </label>
                    </div>
                </div>

                <div class="col-xs-4">
                    <p class="form_row__right_alert" ng-show="registerForm.agreement.$error.required">
                        请选择
                    </p>
                </div>
            </div>

            <div class="row mg-tp-15" ng-show="backErr.system.show">
                <div class="col-xs-5 col-xs-offset-2">
                    <p class="form_row__bottom_alert" ng-show="backErr.system.status === 1">
                        注册次数过多，请稍后重试
                    </p>
                    <p class="form_row__bottom_alert" ng-show="backErr.system.status === 2">
                        系统繁忙，请稍后重试
                    </p>
                </div>
            </div>

            <div class="row mg-tp-30">
                <div class="col-xs-5 col-xs-offset-2">
                    <button class="btn btn-danger" ng-click="registerDemo()">
                        注册账户
                    </button>
                </div>
            </div>
        </form>
    </div>

    <div class="register_demo" ng-if="step === 2">
        <div class="row">
            <div class="col-xs-5">
                <div class="register_demo__logo">
                </div>
            </div>
            <div class="col-xs-6 text-center">
                <h3 class="register_demo__title">账户注册完成</h3>
                <p class="register_demo__tip">
                    老虎汇已免费赠送您 10,000 美金进行模拟交易。 
                </p>
                <a class="btn btn-danger" href="#/personal">
                    进入个人中心
                </a>
                <span class="register_demo__register_real" ng-click="registerReal()">
                    开通真实账户，进行真实交易
                </span>
            </div>
        </div>


        
        <div ng-if="step === 2">
            <!-- Google Code -->
            <script type="text/javascript">
                /* <![CDATA[ */
                var google_conversion_id = 951068164;
                var google_conversion_language = "en";
                var google_conversion_format = "3";
                var google_conversion_color = "ffffff";
                var google_conversion_label = "nLqwCIadg1wQhMzAxQM";
                var google_remarketing_only = false;
                /* ]]> */
            </script>
            <script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js">
            </script>
            <noscript>
                <div style="display:inline;">
                    <img height="1" width="1" style="border-style:none;" alt="" src="//www.googleadservices.com/pagead/conversion/951068164/?label=nLqwCIadg1wQhMzAxQM&amp;guid=ON&amp;script=0"/>
                </div>
            </noscript>
            
            <!-- 聚合代码 -->
            <script type="text/javascript">
                console.info();
                var _mvq = window._mvq || [];
                window._mvq = _mvq;
                _mvq.push(['$setAccount', 'm-122344-0']);
                _mvq.push(['$setGeneral', 'registered', '', $('input[name="username"]').val(), $('input[name="phone"]').val()]);
                _mvq.push(['$logConversion']);
                
                (function() {
                    var mvl = document.createElement('script');
                    mvl.type = 'text/javascript'; mvl.async = true;
                    mvl.src = ('https:' == document.location.protocol ? 'https://static-ssl.mediav.com/mvl.js' : 'http://static.mediav.com/mvl.js');
                    var s = document.getElementsByTagName('script')[0];
                    s.parentNode.insertBefore(mvl, s); 
                })();
            </script>
        </div>
    </div>
</div>