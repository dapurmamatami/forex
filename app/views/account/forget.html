<div class="account_ctn">
    <h4 class="account_ctn__title">
        找回密码
        <span>
            ({{step}}/3)
        </span>
    </h4>

    <form name="formStep1" novalidate ng-if="step === 1">
        <div class="row form_row">
            <div class="col-xs-2 text-right">
                <label>手机号</label>
            </div>
            <div class="col-xs-3">
                <input class="form-control" 
                       name="phone" 
                       type="text"
                       required
                       ng-model="phone.number"
                       ng-pattern="/^(0|86|17951)?(13[0-9]|14[57]|15[0-35-9]|17[678]|18[0-9])[0-9]{8}$/"
                       ng-focus="eliminateErr('phone is not existent')"
                       ng-blur="checkExist()">
                <div ng-show="formStep1.phone.$dirty">
                    <p class="alert alert-danger" ng-show="formStep1.phone.$error.required">
                        请输入手机号码
                    </p>
                    <p class="alert alert-danger" ng-show="formStep1.phone.$error.pattern">
                        请输入正确的手机号
                    </p>
                    <p class="alert alert-danger" ng-show="!phone.existence">
                        该手机号码尚未注册
                    </p>
                </div>
            </div>
            <div class="col-xs-2 text-center">
                <div class="check_valid">
                    <div class="check_valid__check" ng-if="!phone.infoBack">
                        检查可用性
                    </div>
                    <div class="check_valid__invalid" ng-if="phone.infoBack && !phone.existence">
                        不可用
                    </div>
                    <div class="check_valid__valid" ng-if="phone.infoBack && phone.existence">
                        可用
                    </div>
                </div>
            </div>
        </div>
        <div class="row form_row">
            <div class="col-xs-2 text-right">
                <label>验证码</label>
            </div>
            <div class="col-xs-3">
                <input class="form-control" 
                       name="verifyCode"
                       type="text"
                       required
                       ng-model="phone.verifyCode"
                       ng-focus="eliminateErr('verify code is incorrect')">
                <div ng-show="formStep1.verifyCode.$dirty">
                    <p class="alert alert-danger" ng-show="formStep1.verifyCode.$error.required">
                        请输入验证码
                    </p>
                    <p class="alert alert-danger" ng-show="!phone.correct">
                        验证码错误
                    </p>
                </div>
            </div>
            <div class="col-xs-2">
                <span class="verify_timer_btn" tw-verify-timer  ng-disabled="formStep1.phone.$invalid || !phone.infoBack || !phone.existence" ng-click="getVerifyCode()">
                </span>
            </div>
        </div>
        <div class="row mg-tp-30">
            <div class="col-xs-5 col-xs-offset-2">
                <button class="btn btn-danger" ng-disabled="formStep1.$invalid" ng-click="submitFormStep1()">
                    下一步
                </button>
            </div>
        </div>
    </form>

    <form name="formStep2" novalidate ng-if="step === 2">
        <div class="row form_row">
            <div class="col-xs-2 text-right">
                <label>新密码</label>
            </div>
            <div class="col-xs-5">
                <input class="form-control"
                       name="newPwd" 
                       type="password"
                       required
                       ng-model="password.newPwd"
                       tw-pwd-valid>
                <div ng-show="formStep2.newPwd.$dirty">
                    <p class="alert alert-danger" ng-show="formStep2.newPwd.$error.required">
                        请输入新密码
                    </p>
                    <p class="alert alert-danger" ng-show="formStep2.newPwd.$error.twPwdValid">
                        6-15 个字符，可由大写字母，小写字母，数字，符号（有限制）组成，且至少包含其中2项
                    </p>
                </div>
            </div>
        </div>
        <div class="row form_row">
            <div class="col-xs-2 text-right">
                <label>确认密码</label>
            </div>
            <div class="col-xs-5">
               <input class="form-control" 
                       name="confirmPwd"
                       type="password"
                       required
                       ng-model="password.confirmPwd"
                       tw-confirm-pwd
                       password="password.newPwd">
                <div ng-show="formStep2.confirmPwd.$dirty">
                    <p class="alert alert-danger" ng-show="formStep2.confirmPwd.$error.required">
                        请再次输入新密码
                    </p>
                    <p class="alert alert-danger" ng-show="formStep2.confirmPwd.$error.twConfirmPwd">
                        输入的新密码不正确
                    </p>
                </div>    
            </div>
        </div>
        <div class="row mg-tp-30">
            <div class="col-xs-5 col-xs-offset-2">
                <button class="btn btn-danger" ng-disabled="formStep2.$invalid" ng-click="submitFormStep2()">
                    下一步
                </button>
            </div>
        </div>
    </form>

    <div class="row" ng-if="step === 3">
        <div class="col-xs-5 col-xs-offset-2 text-center">
            <h3>
                新密码设置成功！
            </h3>
            <p class="account_ctn__tip">
                注意：您的 MT4 客户端登陆密码也同时被修改为新密码
            </p>
            <a class="btn btn-danger" href="#/account/login">
                重新登录
            </a>
        </div>
    </div>

</div>